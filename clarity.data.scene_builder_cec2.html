<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>clarity.data.scene_builder_cec2 module &#8212; Project name not set  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="clarity.data.scene_renderer_cec1 module" href="clarity.data.scene_renderer_cec1.html" />
    <link rel="prev" title="clarity.data.demo_data module" href="clarity.data.demo_data.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-clarity.data.scene_builder_cec2">
<span id="clarity-data-scene-builder-cec2-module"></span><h1>clarity.data.scene_builder_cec2 module<a class="headerlink" href="#module-clarity.data.scene_builder_cec2" title="Link to this heading">¶</a></h1>
<p>Code for building the scenes.json files.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.InterfererType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">InterfererType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#InterfererType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.InterfererType" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>Enum for interferer types.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.InterfererType.MUSIC">
<span class="sig-name descname"><span class="pre">MUSIC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'music'</span></em><a class="headerlink" href="#clarity.data.scene_builder_cec2.InterfererType.MUSIC" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.InterfererType.NOISE">
<span class="sig-name descname"><span class="pre">NOISE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'noise'</span></em><a class="headerlink" href="#clarity.data.scene_builder_cec2.InterfererType.NOISE" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.InterfererType.SPEECH">
<span class="sig-name descname"><span class="pre">SPEECH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'speech'</span></em><a class="headerlink" href="#clarity.data.scene_builder_cec2.InterfererType.SPEECH" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">RoomBuilder</span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Functions for handling rooms.</p>
<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder.build_from_rpf">
<span class="sig-name descname"><span class="pre">build_from_rpf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rpf_location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_interferers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_rooms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_room</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder.build_from_rpf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder.build_from_rpf" title="Link to this definition">¶</a></dt>
<dd><p>Build a list of rooms by extracting info from RAVEN rpf files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rpf_location</strong> (<em>str</em>) – path to where rpf files are stored</p></li>
<li><p><strong>n_interferers</strong> (<em>int</em><em>, </em><em>optional</em>) – number of interferer definitions to expect.
Defaults to N_INTERFERERS.</p></li>
<li><p><strong>n_rooms</strong> (<em>int</em><em>, </em><em>optional</em>) – number of scenes to expect. Defaults to N_SCENES.</p></li>
<li><p><strong>start_room</strong> (<em>int</em><em>, </em><em>optional</em>) – index of the first room to expect</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder.get_room">
<span class="sig-name descname"><span class="pre">get_room</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder.get_room"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder.get_room" title="Link to this definition">¶</a></dt>
<dd><p>Get a room by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name of room to extract.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder.load" title="Link to this definition">¶</a></dt>
<dd><p>Load the list of room from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – filename to JSON file from which room data is loaded.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder.rebuild_dict">
<span class="sig-name descname"><span class="pre">rebuild_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder.rebuild_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder.rebuild_dict" title="Link to this definition">¶</a></dt>
<dd><p>Build room dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoomBuilder.save_rooms">
<span class="sig-name descname"><span class="pre">save_rooms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoomBuilder.save_rooms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoomBuilder.save_rooms" title="Link to this definition">¶</a></dt>
<dd><p>Save the list of rooms to a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – filename to JSON file to which room data is saved.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.RoundingFloat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">RoundingFloat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#RoundingFloat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.RoundingFloat" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
<p>Round a float to 4 decimal places.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">SceneBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scene_datasets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interferer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snr_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listener</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle_rooms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class with methods for building a list of scenes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.add_SNR_to_scene">
<span class="sig-name descname"><span class="pre">add_SNR_to_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snr_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.add_SNR_to_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.add_SNR_to_scene" title="Link to this definition">¶</a></dt>
<dd><p>Add the Signal Noise Ratio (SNR) info to the scenes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>snr_range</strong> (<em>list</em>) – Range of values from which SNR will be sampled.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.add_interferer_to_scene">
<span class="sig-name descname"><span class="pre">add_interferer_to_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speech_interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise_interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">music_interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_early_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.add_interferer_to_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.add_interferer_to_scene" title="Link to this definition">¶</a></dt>
<dd><p>Add interferer to the scene description file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speech_interferers</strong> (<em>str</em>) – Path to speech interferer to load.</p></li>
<li><p><strong>noise_interferers</strong> (<em>str</em>) – Path to noise interferer to load.</p></li>
<li><p><strong>music_interferers</strong> (<em>str</em>) – Path to music interferer to load</p></li>
<li><p><strong>number</strong> (<em>list</em>) – Number of interefers to be added.</p></li>
<li><p><strong>start_time_range</strong> (<em>list</em>) – Range for randomly selecting start point.</p></li>
<li><p><strong>end_early_time_range</strong> (<em>list</em>) – Range for randomly selecting end point.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.add_listener_details_to_scene">
<span class="sig-name descname"><span class="pre">add_listener_details_to_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">heads</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_start_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration_mean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration_sd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_initial_mean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_initial_sd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_final_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.add_listener_details_to_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.add_listener_details_to_scene" title="Link to this definition">¶</a></dt>
<dd><p>Add the listener info to the scenes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>channels</em>)</p></li>
<li><p><strong>(</strong><strong>)</strong></p></li>
<li><p><strong>relative_start_time_range</strong> (<em>list</em>) – Range from which start time is selected at
random.</p></li>
<li><p><strong>duration_mean</strong> (<em>float</em>) – mean of the time offset for start of turn</p></li>
<li><p><strong>duration_sd</strong> (<em>float</em>) – standard deviation of the time offset for start of turn</p></li>
<li><p><strong>angle_initial_mean</strong> (<em>float</em>)</p></li>
<li><p><strong>angle_initial_sd</strong> (<em>float</em>)</p></li>
<li><p><strong>angle_final_range</strong> (<em>tuple</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.add_target_to_scene">
<span class="sig-name descname"><span class="pre">add_target_to_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_speakers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_selection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.add_target_to_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.add_target_to_scene" title="Link to this definition">¶</a></dt>
<dd><p>Add target info to the scenes.</p>
<p>Uses target speaker file set via config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>str</em>) – dataset to be added.</p></li>
<li><p><strong>target_speakers</strong> (<em>str</em>)</p></li>
<li><p><strong>target_selection</strong> (<em>str</em>) – Type of target to be added, valid values are
‘SEQUENTIAL’ and ‘RANDOM’.</p></li>
<li><p><strong>pre_samples_range</strong> (<em>list</em>) – Parameters for number of samples prior to target
onset.</p></li>
<li><p><strong>post_samples_range</strong> (<em>list</em>) – Parameters for number of samples to continue
player after target offsets.</p></li>
</ul>
</dd>
</dl>
<p>Raises: TypeError if room_selection is not SEQUENTIAL or RANDOM</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.initialise_scenes">
<span class="sig-name descname"><span class="pre">initialise_scenes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_scenes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">room_selection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scene_start_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.initialise_scenes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.initialise_scenes" title="Link to this definition">¶</a></dt>
<dd><p>Initialise the scenes for a given dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – train, dev, or eval set</p></li>
<li><p><strong>n_scenes</strong> (<em>int</em>) – number of scenes to generate</p></li>
<li><p><strong>room_selection</strong> (<em>str</em>) – SEQUENTIAL or RANDOM</p></li>
<li><p><strong>scene_start_index</strong> (<em>int</em>) – index to start for scene IDs</p></li>
</ul>
</dd>
</dl>
<p>Raises: TypeError if room_selection is not SEQUENTIAL or RANDOM</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.instantiate_scenes">
<span class="sig-name descname"><span class="pre">instantiate_scenes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.instantiate_scenes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.instantiate_scenes" title="Link to this definition">¶</a></dt>
<dd><p>Instantiate scenes with targets, interferers, SNR and listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.SceneBuilder.save_scenes">
<span class="sig-name descname"><span class="pre">save_scenes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#SceneBuilder.save_scenes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.SceneBuilder.save_scenes" title="Link to this definition">¶</a></dt>
<dd><p>Save the list of scenes to a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Filename to save scenes to.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.add_interferer_to_scene_inner">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">add_interferer_to_scene_inner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scene</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_early_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#add_interferer_to_scene_inner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.add_interferer_to_scene_inner" title="Link to this definition">¶</a></dt>
<dd><p>Randomly select interferers and add them to the given scene.
A random number of interferers is chosen, then each is given a random type
selected from the possible speech, nonspeech, music types.
Interferers are then chosen from the available lists according to the type
and also taking care to match the scenes ‘dataset’ field, ie. train, dev, test.
The interferer data is supplied as a dictionary of lists of lists. The key
being “speech”, “nonspeech”, or “music”, and the list of list being a partitioned
list of interferers for that type.
The idea of using a list of lists is that interferers can be split by
subcondition and then the randomization draws equally from each subcondition,
e.g. for nonspeech there is “washing machine”, “microwave” etc. This ensures that
each subcondition is equally represented even if the number of exemplars of
each subcondition is different.
Note, there is no return. The scene is modified in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scene</strong> (<em>dict</em>) – the scene description</p></li>
<li><p><strong>interferers</strong> (<em>dict</em>) – the interferer metadata</p></li>
<li><p><strong>number</strong> (<em>list</em>) – number of interferers</p></li>
<li><p><strong>start_time_range</strong> (<em>list</em>) – range of starting points as integers, a random number
is selected between these.</p></li>
<li><p><strong>end_early_time_range</strong> (<em>list</em>) – range of end points as integers, a random number
is selected between these.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.add_this_target_to_scene">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">add_this_target_to_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scene</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#add_this_target_to_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.add_this_target_to_scene" title="Link to this definition">¶</a></dt>
<dd><p>Add the target details to the scene dict.</p>
<p>Adds given target to given scene. Target details will be taken from the target dict
but the start time will be according to the CEC2 target start time specification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>dict</em>) – target dict read from target metadata file.</p></li>
<li><p><strong>scene</strong> (<em>dict</em>) – complete scene dictionary.</p></li>
<li><p><strong>pre_samples_range</strong> (<em>list</em>) – parameters for number of samples prior to target onset</p></li>
<li><p><strong>post_samples_range</strong> (<em>list</em>) – parameters for number of samples to continue
player after target offsets.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.build_room">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">build_room</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interferer_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#build_room"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.build_room" title="Link to this definition">¶</a></dt>
<dd><p>Build room json file from contents of related rpf files.
Note, there is an rpf file for each source in the scene. All of these
files are read and a single scene json file is constructed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_file</strong> (<em>str</em>) – rpf file containing the target position</p></li>
<li><p><strong>interferer_files</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – list of files containing the interferer positions</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary representation of the scene following CEC2 scene.json format</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.generate_rotation">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">generate_rotation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scene</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_start_time_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration_mean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration_sd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_initial_mean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_initial_sd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_final_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#generate_rotation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.generate_rotation" title="Link to this definition">¶</a></dt>
<dd><p>Generate a suitable head rotation for the given scene.
Based on behavioural studies by Hadley et al. TODO: find ref</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scene</strong> (<em>dict</em>) – the scene description</p></li>
<li><p><strong>relative_start_time_range</strong> (<em>list</em>) – Range from which start time is
uniformly selected at random.</p></li>
<li><p><strong>duration_mean</strong> (<em>float</em>) – mean of the time offset for start of turn</p></li>
<li><p><strong>duration_sd</strong> (<em>float</em>) – standard deviation of the time offset for start of turn</p></li>
<li><p><strong>angle_initial_mean</strong> (<em>float</em>)</p></li>
<li><p><strong>angle_initial_sd</strong> (<em>float</em>)</p></li>
<li><p><strong>angle_final_range</strong> (<em>tuple</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of dicts with keys “sample” and “view_vector”
specifying the head motion.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.generate_snr">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">generate_snr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snr_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#generate_snr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.generate_snr" title="Link to this definition">¶</a></dt>
<dd><p>Generate a random Signal Noise Ratio (SNR).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>snr_range</strong> (<em>list</em>) – Range from which to uniformly sample SNR.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>random number from uniform distribution in given range.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_num_post_samples">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_num_post_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">post_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_num_post_samples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_num_post_samples" title="Link to this definition">¶</a></dt>
<dd><p>Number of samples to continue player after target offsets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>post_samples_range</strong> (<em>list</em>) – parameters for number of samples to continue.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_num_pre_samples">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_num_pre_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pre_samples_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_num_pre_samples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_num_pre_samples" title="Link to this definition">¶</a></dt>
<dd><p>Number of samples prior to target onset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pre_samples_range</strong> (<em>list</em>) – parameters for number of samples prior to target onset</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_random_hrir_set">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_random_hrir_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">heads</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_random_hrir_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_random_hrir_set" title="Link to this definition">¶</a></dt>
<dd><p>Get a random HRIR set.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_random_interferer_offset">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_random_interferer_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interferer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_samples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_random_interferer_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_random_interferer_offset" title="Link to this definition">¶</a></dt>
<dd><p>Generate a random offset sample for interferer.
The offset sample is the point within the masker signal at which the interferer
segment will be extracted. Randomly selected but with care for it not to start
too late, i.e. such that the required samples would overrun the end of the masker
signal will be used is taken.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interferer</strong> (<em>dict</em>) – the interferer metadata</p></li>
<li><p><strong>required_samples</strong> (<em>int</em>) – number of samples that is going to be required</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a valid randomly selected offset</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_room_dims">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_room_dims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_room_dims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_room_dims" title="Link to this definition">¶</a></dt>
<dd><p>Find the room dimensions in the rpf file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>text</strong> (<em>str</em>) – String to be searched for room dimensions (string to be searched
for is of the form ‘ProjectName = CuboidRoom_5.9x3.4186x2.9’).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of the three dimensions of the room.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_room_name">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_room_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_room_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_room_name" title="Link to this definition">¶</a></dt>
<dd><p>Find the room name in the rpf file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>text</strong> (<em>str</em>) – String to be searched for room name (‘R’ followed by 5 digits).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The room name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.get_vector">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">get_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#get_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.get_vector" title="Link to this definition">¶</a></dt>
<dd><p>Get a vector quantity from the rpf file.
Will read rpf vector quantities, eg.
“sourceViewVectors = -0.095,-0.995, 0.000”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – string contents of the rpf file</p></li>
<li><p><strong>vector_name</strong> (<em>str</em>) – name of vector to extract (e.g. “sourceViewVectors”)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>vector as list of floats</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.make_rpf_filename_dict">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">make_rpf_filename_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rpf_location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scene_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#make_rpf_filename_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.make_rpf_filename_dict" title="Link to this definition">¶</a></dt>
<dd><p>Construct dictionary storing all rpf files that will be processed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rpf_location</strong> (<em>str</em>) – Location</p></li>
<li><p><strong>scene</strong> (<em>str</em>) – Scene (as string)</p></li>
<li><p><strong>n_interferers</strong> (<em>int</em>) – Number of interferers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary of rpf files to be processed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.read_rpf_file">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">read_rpf_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rpf_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#read_rpf_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.read_rpf_file" title="Link to this definition">¶</a></dt>
<dd><p>Process an rpf file and return key contents as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rpf_filename</strong> (<em>str</em>) – Path to an rpf file to be read.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>dictionary of rpf file contents</dt><dd><p>{“position”: sourcePositions, “view_vector”: sourceViewVectors}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.select_interferer_types">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">select_interferer_types</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allowed_n_interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#clarity.data.scene_builder_cec2.InterfererType" title="clarity.data.scene_builder_cec2.InterfererType"><span class="pre">InterfererType</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#select_interferer_types"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.select_interferer_types" title="Link to this definition">¶</a></dt>
<dd><p>Select the interferer types to use.</p>
<p>The number of interferer is drawn randomly from list of allowed valued.
The type of each is chosen randomly but there is not allowed to be
more than 1 music source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>allowed_n_interferers</strong> (<em>list</em>) – list of allowed number of interferers</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of interferer types to use</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list(<a class="reference internal" href="#clarity.data.scene_builder_cec2.InterfererType" title="clarity.data.scene_builder_cec2.InterfererType">InterfererType</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.select_random_interferer">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">select_random_interferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interferers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_samples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#select_random_interferer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.select_random_interferer" title="Link to this definition">¶</a></dt>
<dd><p>Randomly select an interferer.
Interferers stored as list of list. First randomly select a sublist
then randomly select an item from sublist matching constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interferers</strong> (<em>list</em><em>(</em><em>list</em><em>)</em>) – interferers as list of lists</p></li>
<li><p><strong>dataset</strong> (<em>str</em>) – desired data [train, dev, eval]</p></li>
<li><p><strong>required_samples</strong> (<em>int</em>) – required number of samples</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if no suitable interferer is found</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the interferer dict</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clarity.data.scene_builder_cec2.set_random_seed">
<span class="sig-prename descclassname"><span class="pre">clarity.data.scene_builder_cec2.</span></span><span class="sig-name descname"><span class="pre">set_random_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_seed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/clarity/data/scene_builder_cec2.html#set_random_seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clarity.data.scene_builder_cec2.set_random_seed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Project name not set</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes_doc.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing to pyClarity</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="clarity.html">clarity package</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">recipes package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="clarity.html">clarity package</a><ul>
  <li><a href="clarity.data.html">clarity.data package</a><ul>
      <li>Previous: <a href="clarity.data.demo_data.html" title="previous chapter">clarity.data.demo_data module</a></li>
      <li>Next: <a href="clarity.data.scene_renderer_cec1.html" title="next chapter">clarity.data.scene_renderer_cec1 module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/clarity.data.scene_builder_cec2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>